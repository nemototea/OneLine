# プラスボタン修正の動作確認

## 修正内容
プラスボタンから投稿する際に、既存の当日の日記があればそれを入力フォームに反映するように修正。

## 修正前の問題
```
1. ホーム画面のプラスボタンをタップ
2. 既に今日の日記が存在していても、入力欄は空
3. そのまま投稿すると既存の日記が上書きされる
```

## 修正後の期待動作
```
1. ホーム画面のプラスボタンをタップ
2. 今日の日記が既に存在する場合：
   → 既存の内容が入力フォームに表示される
   → isNew = false（編集モード）
3. 今日の日記が存在しない場合：
   → 空の入力フォームが表示される
   → isNew = true（新規作成モード）
```

## テストケース

### ケース1: 既存の今日の日記がある場合
**前提条件**: 
- 今日（2025-08-02）の日記「今日は良い天気でした」が既に保存されている

**操作**:
1. ホーム画面のプラスボタンをタップ

**期待結果**:
- 入力フォームに「今日は良い天気でした」が表示される
- タイトルバーに今日の日付が表示される
- 編集モードとして動作する

### ケース2: 今日の日記がない場合
**前提条件**: 
- 今日（2025-08-02）の日記が存在しない

**操作**:
1. ホーム画面のプラスボタンをタップ

**期待結果**:
- 空の入力フォームが表示される
- タイトルバーに今日の日付が表示される
- 新規作成モードとして動作する

### ケース3: 日記一覧からのタップ（既存動作の確認）
**前提条件**: 
- 2025-08-01の日記「昨日の出来事」が存在する

**操作**:
1. 日記一覧で2025-08-01の日記をタップ

**期待結果**:
- 入力フォームに「昨日の出来事」が表示される
- 既存動作と同じ（変更なし）

## 実装のポイント

### 修正箇所
`DiaryEditViewModel.loadEntry()` メソッド

### 修正内容
```kotlin
if (dateString == "new") {
    val today = LocalDate.now()
    val todayString = today.format(DateTimeFormatter.ISO_LOCAL_DATE)
    
    // 今日の日記が既に存在するかチェック
    val existingEntry = gitRepository.getEntry(todayString)
    
    if (existingEntry != null) {
        // 既存の今日の日記がある場合は、それを編集モードで開く
        _uiState.value = UiState.Editing(existingEntry, isNew = false)
    } else {
        // 今日の日記がない場合は新規作成
        _uiState.value = UiState.Editing(
            DiaryEntry(date = today, content = ""),
            isNew = true
        )
    }
}
```

### ログ出力
- 既存エントリが見つかった場合: "Found existing entry for today: YYYY-MM-DD"
- 新規作成の場合: "No existing entry for today, creating new: YYYY-MM-DD"

## 副次的な効果

### 良い効果
1. **データ損失の防止**: 既存の日記が意図せず上書きされることがなくなる
2. **UX向上**: プラスボタンと日記一覧からのアクセスで一貫した動作
3. **直感的な動作**: ユーザーの期待に沿った動作

### 注意点
1. **パフォーマンス**: プラスボタンタップ時に既存エントリのチェックが発生
2. **ログ出力**: デバッグ用のログが追加される
